module.exports=function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=12)}([function(e,t){e.exports=require("electron")},function(e,t){e.exports=require("crypto")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0);let r;t._setFallbackSession=e=>{r=e},t.sessionFromIpcEvent=e=>e.sender.session||r||n.session.defaultSession},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WINDOW_ID_NONE=-1,t.WINDOW_ID_CURRENT=-2,t.TAB_ID_NONE=-1,t.PROTOCOL="chrome-extension",t.PROTOCOL_SCHEME=t.PROTOCOL+"://"},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0);t.HandlerFactory=class{static create(e,t){return(s,r,i=!1)=>n.ipcMain.handle(`${e}.${s}`,(...e)=>(i||(e=e.slice(1)),r.bind(t)(...e)))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(14),i=s(6),o=s(3),a=s(8);t.sendToExtensionPages=(e,...t)=>{n.webContents.getAllWebContents().forEach(s=>{!s.isDestroyed()&&s.getURL().startsWith(o.PROTOCOL_SCHEME)&&s.send(e,...t)})};class c extends i.EventEmitter{constructor(){super(),n.app.on("web-contents-created",(e,t)=>{a.isBackgroundPage(t)&&this.emit("created",n.webContents)})}get(e,t){return n.webContents.getAllWebContents().find(s=>a.isBackgroundPage(s)&&r.parse(s.getURL()).hostname===e&&s.session===t)}}t.BackgroundPages=c},function(e,t){e.exports=require("events")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(13),r=s(15),i=s(5),o=s(17),a=s(18),c=s(20),d=s(21);class l{constructor(){this.tabs=new r.TabsAPI,this.cookies=new n.CookiesAPI,this.windows=new o.WindowsAPI,this.webRequest=new c.WebRequestAPI,this.browserAction=new d.BrowserActionAPI,this.backgroundPages=new i.BackgroundPages}initializeSession(e,t){if(e.getPreloads().includes(t))throw new Error("Extension preload has already been injected into this Session.");e.setPreloads(e.getPreloads().concat(t)),a.hookExtensionWebRequestBypass(e),this.cookies.observeSession(e)}}t.Extensions=l,l.instance=new l,t.extensions=l.instance,function(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}(s(2))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(3),r=s(9),i=s(0);t.isBackgroundPage=e=>"remote"===e.getType()&&e.getURL().startsWith(n.PROTOCOL_SCHEME),t.webContentsInvoke=(e,t,...s)=>new Promise(n=>{const o=r.randomId();i.ipcMain.once(`${t}-${o}`,(e,...t)=>n(...t)),e.send(t,...s,o)})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(22);t.randomId=()=>n.v4()},function(e,t){e.exports=require("path")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(19),r=s(9),i=e=>e.sort((e,t)=>t.context.order-e.context.order).reduce(async(e,t)=>{if(e.cancel)return e;const s=await t.apply();return Object.assign(Object.assign({},e),s)},{cancel:!1}),o=["onBeforeRequest","onBeforeSendHeaders","onHeadersReceived"],a=["onBeforeRequest","onBeforeSendHeaders","onHeadersReceived","onSendHeaders","onResponseStarted","onBeforeRedirect","onCompleted","onErrorOccurred"];class c{constructor(e){this.orderIndex=0,this.webRequest=e,this.listeners=new Map,this.filters=new Map,this.resolvers=new Map}get nextIndex(){return this.orderIndex+=1}getListeners(){return this.listeners}getListenersFor(e){return this.listeners.get(e)}getFilters(){return this.filters}getFiltersFor(e){return this.filters.get(e)}hasCallback(e){return o.includes(e)}alias(e,t){const s=this.parseArguments(t);return this.identifyAction(e,s)}addListener(e,t,s,n={}){const{urls:i}=t,o=r.randomId(),a={order:this.nextIndex},c={id:o,urls:i,action:s,context:Object.assign(Object.assign({},n),a)};this.listeners.has(e)||this.listeners.set(e,new Map),this.listeners.get(e).set(o,c),this.filters.has(e)||this.filters.set(e,new Set);const d=this.filters.get(e);for(const e of i)d.add(e);return this.webRequest[e]({urls:[...d]},this.listenerFactory(e)),c}removeListener(e,t){const s=this.listeners.get(e);if(s&&s.has(t))if(1===s.size)this.clearListeners(e);else{s.delete(t);const n=this.mergeFilters(s);this.filters.set(e,n),this.webRequest[e]({urls:[...n]},this.listenerFactory(e))}}clearListeners(e){const t=this.listeners.get(e),s=this.filters.get(e);t&&t.clear(),s&&s.clear(),this.webRequest[e](null)}setResolver(e,t){this.hasCallback(e)?this.resolvers.set(e,t):console.warn(`Event method "${e}" has no callback and does not use a resolver`)}matchListeners(e,t){return Array.from(t.values()).filter(t=>t.urls.some(t=>n.matchesPattern(t,e)))}listenerFactory(e){return async(t,s)=>{if(!this.listeners.has(e))return void this.webRequest[e](null);const n=this.listeners.get(e);if(!n)return void(s&&s({cancel:!1}));const r=this.matchListeners(t.url,n);if(0===r.length)return void(s&&s({cancel:!1}));let o=this.resolvers.get(e);o||(o=i);const a=this.processRequests(t,r);if(this.hasCallback(e)&&s){s(await o(a))}else a.map(e=>e.apply())}}processRequests(e,t){const s=[];for(const n of t){const t=this.makeApplier(e,n.action);s.push({apply:t,context:n.context})}return s}makeApplier(e,t){return()=>new Promise((s,n)=>{try{t(e,s)}catch(e){n(e)}})}mergeFilters(e){return Array.from(e.values()).reduce((e,t)=>{for(const s of t.urls)e.add(s);return e},new Set)}parseArguments(e){const t={unbind:!1,filter:{urls:["<all_urls>"]},action:null,context:{}};switch(e.length){case 0:t.unbind=!0;break;case 1:if("function"==typeof e[0]){t.action=e[0];break}throw new Error("Wrong function signature : No function listener given");case 2:if("object"==typeof e[0]&&"function"==typeof e[1]){t.filter=e[0],t.action=e[1];break}if("function"==typeof e[0]){t.action=e[0],t.context=e[1];break}throw new Error("Wrong function signature : argument 1 should be an object filters or the function listener");case 3:if("object"==typeof e[0]&&"function"==typeof e[1]){t.filter=e[0],t.action=e[1],t.context=e[2];break}throw new Error("Wrong function signature : should be arg 1 -> filter object, arg 2 -> function listener, arg 3 -> context");default:throw new Error("Wrong function signature : Too many arguments")}return t}identifyAction(e,t){const{unbind:s,filter:n,action:r,context:i}=t;if(s)return this.clearListeners(e);if(!r)throw new Error(`Cannot bind with ${e} : a listener is missing.`);return this.addListener(e,n,r,i)}}t.BetterWebRequest=c;const d={get:(e,t)=>a.includes(t)?(...s)=>{e.alias(t,s)}:e[t]},l=e=>new Proxy(new c(e.webRequest),d),u=new Set;t.default=e=>(u.has(e)||(Object.defineProperty(e,"webRequest",{value:l(e),writable:!1}),u.add(e)),e)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}(s(7))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),r=s(4),i=s(5),o={explicit:"explicit",overwrite:"overwrite",expired:"expired",evicted:"evicted","expired-overwrite":"expired_overwrite"};t.CookiesAPI=class{constructor(){const e=r.HandlerFactory.create("cookies",this);e("get",this.get,!0),e("getAll",this.getAll,!0),e("set",this.set,!0),e("remove",this.remove,!0)}observeSession(e){e.cookies.on("changed",(e,t,s,n)=>{const r={cookie:this.getChromeCookie(t),cause:o[s],removed:n};i.sendToExtensionPages("cookies.onChanged",r)})}getChromeCookie(e){return{name:e.name,value:e.value,domain:e.domain,hostOnly:e.hostOnly,path:e.path,secure:e.secure,httpOnly:e.httpOnly,sameSite:"no_restriction",session:e.session,expirationDate:e.expirationDate,storeId:"0"}}async getAll(e,t){const{url:s,name:r,domain:i,path:o,secure:a,session:c}=t,d=await n.sessionFromIpcEvent(e).cookies.get({url:s,name:r,domain:i,path:o,secure:a,session:c});return d?d.map(e=>this.getChromeCookie(e)):[]}async get(e,t){const{url:s,name:r}=t,i=await n.sessionFromIpcEvent(e).cookies.get({url:s,name:r});if(i&&i[0]){const e=i[0];return this.getChromeCookie(e)}return null}async set(e,t){const{url:s,name:r,value:i,domain:o,path:a,secure:c,httpOnly:d,expirationDate:l}=t;return await n.sessionFromIpcEvent(e).cookies.set({url:s,name:r,value:i,domain:o,path:a,secure:c,httpOnly:d,expirationDate:l}),{name:r,value:i,domain:o,path:a,secure:c,httpOnly:d,expirationDate:l,storeId:null}}async remove(e,t){const{url:s,name:r}=t;return await n.sessionFromIpcEvent(e).cookies.remove(s,r),{url:s,name:r,storeId:null}}}},function(e,t){e.exports=require("url")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(16),i=s(10),o=s(2),a=s(5),c=s(6),d=s(7),l=s(4);t.getParentWindowOfTab=e=>{switch(e.getType()){case"window":return n.BrowserWindow.fromWebContents(e);case"browserView":case"webview":return e.getOwnerBrowserWindow()}};class u extends c.EventEmitter{constructor(){super(),this.tabs=new Set,this.detailsCache=new Map,this.getDetails=e=>e?this.detailsCache.has(e)?this.detailsCache.get(e):this.createDetails(e):null;const e=l.HandlerFactory.create("tabs",this);e("get",this.get),e("getSelected",this.getSelected),e("getAllInWindow",this.getAllInWindow),e("query",this.query),e("update",this.update),e("reload",this.reload),e("create",this.create),e("remove",this.remove),e("getCurrent",this.getCurrent,!0),e("insertCSS",this.insertCSS,!0)}async update(e,t){const s=this.getTabById(e);if(!s)return null;const{url:n,muted:r,active:i}=t;return n&&await s.loadURL(n),"boolean"==typeof r&&s.setAudioMuted(r),i&&this.activate(e),this.onUpdated(s),this.createDetails(s)}activate(e,...t){const s=this.getTabById(e);if(!s)return;const n=this.getDetails(s),r=!n.active;this.detailsCache.forEach((t,s)=>{t.active=e===s.id}),r&&(this.emit("activated",s.id,n.windowId,...t),a.sendToExtensionPages("tabs.onActivated",{tabId:e,windowId:n.windowId}))}get(e){const t=this.getTabById(e);return this.getDetails(t)}remove(e){Array.isArray(e)?e.forEach(e=>this.emit("will-remove",e)):this.emit("will-remove",e)}getAllInWindow(e){return this.query({windowId:e})}getSelected(e){return"number"==typeof e?this.query({windowId:e,active:!0})[0]:this.query({active:!0})[0]}query(e={}){const t=e=>void 0!==e;return Array.from(this.tabs).map(this.getDetails).filter(s=>(!t(e.active)||e.active===s.active)&&((!t(e.pinned)||e.pinned===s.pinned)&&((!t(e.audible)||e.audible===s.audible)&&((!t(e.muted)||e.muted===s.mutedInfo.muted)&&((!t(e.highlighted)||e.highlighted===s.highlighted)&&((!t(e.discarded)||e.discarded===s.discarded)&&((!t(e.autoDiscardable)||e.autoDiscardable===s.autoDiscardable)&&((!t(e.status)||e.status===s.status)&&((!t(e.windowId)||e.windowId===s.windowId)&&((!t(e.title)||e.title===s.title)&&(!t(e.url)||e.url===s.url||"<all_urls>"===e.url))))))))))).map((e,t)=>(e.index=t,e))}async create(e){if(!this.onCreate)throw new Error("No onCreate event handler");const t=await this.onCreate(e),s=this.getTabById(t);return this.getDetails(s)}observe(e){this.tabs.add(e),e.once("destroyed",()=>{this.tabs.delete(e),this.onRemoved(e)});["page-title-updated","did-start-loading","did-stop-loading","media-started-playing","media-paused","did-start-navigation","did-redirect-navigation","did-navigate-in-page"].forEach(t=>{e.on(t,()=>{this.onUpdated(e)})}),e.on("page-favicon-updated",(t,s)=>{e.favicon=s[0],this.onUpdated(e)}),this.onCreated(e)}reload(e,t={}){const s=this.getTabById(e);s&&(t.bypassCache?s.reloadIgnoringCache():s.reload())}getTabById(e){return Array.from(this.tabs).find(t=>t.id===e)}getCurrent(e){const t=this.getTabById(e.sender.id);return t?this.getDetails(t):null}async insertCSS(e,t,s,n){const a=this.getTabById(s);if(a){if(n.hasOwnProperty("file")){const s=o.sessionFromIpcEvent(e);n.code=await r.promises.readFile(i.resolve(s.getExtension(t).path,n.file),"utf8")}a.insertCSS(n.code,{cssOrigin:n.cssOrigin})}}createDetails(e){const s=t.getParentWindowOfTab(e),[n=0,r=0]=s?s.getSize():[],i=this.detailsCache.get(e)||{id:e.id,active:!1,highlighted:!1,selected:!1,autoDiscardable:!0,discarded:!1,incognito:!1,index:0,pinned:!1},o=Object.assign(Object.assign({},i),{audible:e.isCurrentlyAudible(),favIconUrl:e.favicon||void 0,height:r,width:n,mutedInfo:{muted:e.audioMuted},status:e.isLoading()?"loading":"complete",title:e.getTitle(),url:e.getURL(),windowId:s?s.id:-1});return this.onCreateDetails&&this.onCreateDetails(e,o),this.detailsCache.set(e,o),o}onUpdated(e){if(!e)return;const t=this.detailsCache.get(e);if(!t)return;const s=this.createDetails(e),n=["status","url","pinned","audible","discarded","autoDiscardable","mutedInfo","favIconUrl","title"];let r=!1;const i={};for(const e of n)s[e]!==t[e]&&(i[e]=s[e],r=!0);r&&(this.emit("updated",e.id,i,s),a.sendToExtensionPages("tabs.onUpdated",e.id,i,s))}onRemoved(e){const t=this.detailsCache.has(e)?this.detailsCache.get(e):null;this.detailsCache.delete(e);const s=t?t.windowId:-1,n=d.Extensions.instance.windows.getWindowById(s);a.sendToExtensionPages("tabs.onRemoved",e.id,{windowId:s,isWindowClosing:!!n&&n.isDestroyed()})}onCreated(e){const t=this.getDetails(e);a.sendToExtensionPages("tabs.onCreated",t)}}t.TabsAPI=u},function(e,t){e.exports=require("fs")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(6),r=s(7),i=s(8),o=s(3),a=s(5),c=s(4);class d extends n.EventEmitter{constructor(){super(),this.windows=new Set,this.detailsCache=new Map,this.getCurrent=(e,t)=>{const s=r.Extensions.instance.tabs.getTabById(e.sender.id);if(!s)return i.isBackgroundPage(e.sender)?this.getDetailsMatchingGetInfo(this.lastFocused,t):null;const n=r.Extensions.instance.tabs.getDetails(s),o=this.getWindowById(n.windowId);return this.getDetailsMatchingGetInfo(o,t)},this.getDetailsMatchingGetInfo=(e,t)=>{if(!e)return null;const s=this.getDetails(e);let n=null==t?void 0:t.windowTypes;return Array.isArray(n)||(n=["normal","popup"]),n.includes(s.type)?!0===(null==t?void 0:t.populate)?Object.assign(Object.assign({},s),{tabs:r.Extensions.instance.tabs.query({windowId:e.id})}):s:null};const e=c.HandlerFactory.create("windows",this);e("create",this.create),e("update",this.update),e("getAll",this.getAll),e("getLastFocused",this.getLastFocused),e("get",this.getHandler,!0),e("getCurrent",this.getCurrent,!0)}update(e,t){const s=this.getWindowById(e);if(!s)return null;const{left:n,top:r,width:i,height:o,state:a}=t;if(!["minimized","maximized","fullscreen"].includes(a)){const e=s.getBounds(),t=Object.assign({},e);isNaN(n)||(t.x=Math.floor(n)),isNaN(r)||(t.y=Math.floor(r)),!isNaN(i)&&i>0&&(t.width=Math.floor(i)),!isNaN(o)&&o>0&&(t.height=Math.floor(o)),e!==t&&s.setBounds(t)}if("boolean"==typeof t.drawAttention&&s.flashFrame(t.drawAttention&&!s.isFocused()),"boolean"==typeof t.focused)if(t.focused)"minimized"!==a&&s.focus();else if(this.onBeforeFocusNextZOrder&&!["fullscreen","maximized"].includes(a)){const t=this.onBeforeFocusNextZOrder(e);this.focus(t)}return"minimized"===a?s.minimize():"maximized"===a?s.maximize():"fullscreen"===a?s.setFullScreen(!0):"normal"===a&&(s.isFullScreen()&&s.setFullScreen(!1),s.isMinimized()&&s.restore(),s.isMaximized()&&s.unmaximize()),this.createDetails(s)}focus(e){this.getWindowById(e).focus()}remove(e){this.emit("will-remove",e)}observe(e){this.windows.add(e),e.once("closed",()=>{this.windows.delete(e),this.onRemoved(e)}),e.on("focus",()=>{this.lastFocused=e}),this.onCreated(e)}getWindowById(e){return Array.from(this.windows).find(t=>t.id===e)}async create(e){if(!this.onCreate)throw new Error("No onCreate event handler");const t=await this.onCreate(e),s=this.getWindowById(t);return this.getDetails(s)}getLastFocused(e){return this.getDetailsMatchingGetInfo(this.lastFocused,e)}get(e,t){const s=this.getWindowById(e);return this.getDetailsMatchingGetInfo(s,t)}getAll(e){return Array.from(this.windows).map(t=>this.getDetailsMatchingGetInfo(t,e)).filter(Boolean)}getHandler(e,t,s){return t===o.WINDOW_ID_CURRENT?this.getCurrent(e,s):this.get(t,s)}createDetails(e){const{x:t,y:s,width:n,height:r}=e.getBounds();let i="normal";e.isFullScreen()?i="fullscreen":e.isMaximized()?i="maximized":e.isMinimized()&&(i="minimized");const o={id:e.id,focused:e.isFocused(),top:s,left:t,width:n,height:r,incognito:!1,type:"normal",state:i,alwaysOnTop:e.isAlwaysOnTop()};return this.onCreateDetails&&this.onCreateDetails(e,o),this.detailsCache.set(e,o),o}getDetails(e){return e?this.detailsCache.has(e)?this.detailsCache.get(e):this.createDetails(e):null}onRemoved(e){this.emit("will-remove",e.id),a.sendToExtensionPages("windows.onRemoved",{windowId:e.id})}onCreated(e){const t=this.getDetails(e);this.emit("created",t),a.sendToExtensionPages("windows.onCreated",t)}}t.WindowsAPI=d},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(11),i=s(3),o=new Map,a=e=>(e=>{const{id:t}=e,s=o.get(t);return!!s&&s.startsWith(i.PROTOCOL_SCHEME)})(e)&&(e=>{const{resourceType:t}=e;return"xhr"===t||"subFrame"===t})(e);t.hookExtensionWebRequestBypass=e=>{r.default(e),e.webRequest.onBeforeSendHeaders((e,t)=>{if(o.set(e.id,e.requestHeaders.Origin),!(e=>{const{webContentsId:t}=e;if(t){const e=n.webContents.fromId(t);return!!e&&e.getURL().startsWith(i.PROTOCOL_SCHEME)}return!1})(e)&&a(e)&&!(e=>{const{method:t}=e;return"OPTIONS"===t})(e))return t({requestHeaders:Object.assign(Object.assign({},e.requestHeaders),{Origin:null})});t({requestHeaders:e.requestHeaders})}),e.webRequest.onHeadersReceived((e,t)=>{for(const t in e.responseHeaders){const s=e.responseHeaders[t];delete e.responseHeaders[t],e.responseHeaders[t.toLowerCase()]=s}const s=(e.responseHeaders["access-control-allow-origin"]||[]).includes("*");e.responseHeaders["access-control-allow-credentials"]=["true"],(a(e)||s)&&(e.responseHeaders["access-control-allow-origin"]=[o.get(e.id)]),o.delete(e.id),t({responseHeaders:e.responseHeaders})})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchesPattern=(e,t)=>{if("<all_urls>"===e)return!0;const s=new RegExp(`^${e.replace(/\*/g,".*").replace("/","\\/")}$`);return null!=t.match(s)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2),i=s(8),o=s(11),a=()=>{n.webContents.getAllWebContents().forEach(e=>{e.send("clear-cache",!0)})};t.WebRequestAPI=class{constructor(){this.addListener=(e,t,s,c)=>{const d=r.sessionFromIpcEvent(e),{webRequest:l}=o.default(d);if(!Object.getOwnPropertyNames(l.webRequest).includes(s))return;a();const{id:u}=l.addListener(s,c,async(s,n)=>{const r=await i.webContentsInvoke(e.sender,t,(e=>{const t=Object.assign(Object.assign({},e),{requestId:e.id.toString(),frameId:0,parentFrameId:-1,type:(s=e.resourceType,"mainFrame"===s?"main_frame":"subFrame"===s?"sub_frame":"cspReport"===s?"csp_report":s),timeStamp:Date.now(),tabId:e.webContentsId,error:""});var s;return t.responseHeaders&&(t.responseHeaders=Object.keys(t.responseHeaders).map(e=>({name:e,value:t.responseHeaders[e][0]}))),t})(s));return r?(r.responseHeaders&&(r.responseHeaders=(e=>{const t={};return e.forEach(e=>t[e.name]=[e.value]),t})(r.responseHeaders)),n(r)):n(s)});n.ipcMain.on("webRequest.removeListener-"+t,()=>{l.removeListener(s,u)})},n.ipcMain.on("clear-cache",()=>{a()}),n.ipcMain.on("webRequest.addListener",this.addListener)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(6),r=s(2),i=s(0),o=s(10),a=s(3),c=s(4),d={badgeText:"text",badgeBackgroundColor:"color",title:"title"},l=(e,t)=>{if(t)return t.startsWith(e)||o.isAbsolute(t)?t:`${e}${t}`},u=(e,t)=>{if("object"==typeof t){const s={};return Object.entries(t).forEach(([t,n])=>{"string"==typeof n&&(s[t]=l(e,n))}),s}if("string"==typeof t)return l(e,t)};class h extends n.EventEmitter{constructor(){super(),this.sessionActionMap=new Map;const e=e=>(t,s,n)=>{const i=r.sessionFromIpcEvent(t),o=this.getOrCreate(i,s),{tabId:a}=n;let c=n[d[e]];"icon"===e?c=n.imageData||u(o.baseUrl,n.path):"popup"===e&&(c=l(o.baseUrl,n.popup));let h=o;a&&(o.tabs.has(a)?h=o.tabs.get(a):(h={},o.tabs.set(a,h))),h[e]!==c&&(h[e]=c,this.emit("updated",o))},t=c.HandlerFactory.create("browserAction",this);["title","icon","popup","badgeBackgroundColor","badgeText"].forEach(s=>t(`set${s.charAt(0).toUpperCase()}${s.substring(1)}`,e(s),!0)),t("getAll",this.getAllHandler,!0),t("getAllInTab",this.getAllInTab),t("onClicked",this.onClicked)}getAllHandler(e){return this.getAllInSession(r.sessionFromIpcEvent(e))}getOrCreate(e,t){let s=this.sessionActionMap.get(e);s||(s=new Map,this.sessionActionMap.set(e,s));let n=s.get(t);return n||(n={tabs:new Map,extensionId:t,baseUrl:`${a.PROTOCOL_SCHEME}${t}/`},s.set(t,n)),n}loadFromManifest(e,t){const{browser_action:s}=t.manifest||{};if(!s)return null;const{default_popup:n,default_title:r,default_icon:i}=s,o=this.getOrCreate(e,t.id);return Object.assign(o,{popup:l(t.url,n),icon:u(t.url,i),title:r}),this.emit("loaded",o),o}getAllInSession(e){const t=this.sessionActionMap.get(e);return t?Array.from(t.values()):[]}getAllInTab(e){const t=i.webContents.fromId(e);if(!t)return[];const{session:s}=t;return this.getAllInSession(s).map(t=>t.tabs.has(e)?Object.assign(Object.assign({},t),t.tabs.get(e)):t)}onClicked(e){this.emit("clicked",e)}}t.BrowserActionAPI=h},function(e,t,s){"use strict";s.r(t),s.d(t,"v1",(function(){return f})),s.d(t,"v3",(function(){return p})),s.d(t,"v4",(function(){return w})),s.d(t,"v5",(function(){return m}));var n=s(1),r=s.n(n);function i(){return r.a.randomBytes(16)}for(var o=[],a=0;a<256;++a)o[a]=(a+256).toString(16).substr(1);var c,d,l=function(e,t){var s=t||0,n=o;return[n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],"-",n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]],n[e[s++]]].join("")},u=0,h=0;var f=function(e,t,s){var n=t&&s||0,r=t||[],o=(e=e||{}).node||c,a=void 0!==e.clockseq?e.clockseq:d;if(null==o||null==a){var f=e.random||(e.rng||i)();null==o&&(o=c=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==a&&(a=d=16383&(f[6]<<8|f[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:h+1,w=g-u+(p-h)/1e4;if(w<0&&void 0===e.clockseq&&(a=a+1&16383),(w<0||g>u)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=g,h=p,d=a;var m=(1e4*(268435455&(g+=122192928e5))+p)%4294967296;r[n++]=m>>>24&255,r[n++]=m>>>16&255,r[n++]=m>>>8&255,r[n++]=255&m;var b=g/4294967296*1e4&268435455;r[n++]=b>>>8&255,r[n++]=255&b,r[n++]=b>>>24&15|16,r[n++]=b>>>16&255,r[n++]=a>>>8|128,r[n++]=255&a;for(var v=0;v<6;++v)r[n+v]=o[v];return t||l(r)};var g=function(e,t,s){var n=function(e,n,r,i){var o=r&&i||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(e)),"string"==typeof n&&(n=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=s(n.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,r)for(var c=0;c<16;++c)r[o+c]=a[c];return r||l(a)};try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};var p=g("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r.a.createHash("md5").update(e).digest()}));var w=function(e,t,s){var n=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[n+o]=r[o];return t||l(r)};var m=g("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r.a.createHash("sha1").update(e).digest()}))}]);
//# sourceMappingURL=index.js.map